{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Diana\\\\Facultate\\\\Year3\\\\PC\\\\ubb-protool-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Diana\\\\Facultate\\\\Year3\\\\PC\\\\ubb-protool-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Diana\\\\Facultate\\\\Year3\\\\PC\\\\ubb-protool-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Diana\\\\Facultate\\\\Year3\\\\PC\\\\ubb-protool-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Diana\\\\Facultate\\\\Year3\\\\PC\\\\ubb-protool-fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Diana\\\\Facultate\\\\Year3\\\\PC\\\\ubb-protool-fe\\\\src\\\\components\\\\login\\\\Login.js\";\nimport React from \"react\";\nimport './Login.css';\nimport { isEmail, isEmpty } from '../../shared/validator';\nimport { connect } from 'react-redux';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport { Teacher } from \"../../model/Teacher\";\nimport { getUserByUsernameAndPassword } from \"../../rest/loginRest\";\nimport { Student } from \"../../model/Student\";\nimport { Subgroup } from \"../../model/Subgroup\";\nimport Typography from \"@material-ui/core/Typography\";\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _this.handleInputChange = function (event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      var formData = _this.state.formData;\n      formData[name] = value;\n\n      _this.setState({\n        formData: formData\n      });\n    };\n\n    _this.validateLoginForm = function (e) {\n      var errors = {};\n      var formData = _this.state.formData;\n\n      if (isEmpty(formData.email)) {\n        errors.email = \"Email can't be blank!\";\n      } else if (!isEmail(formData.email)) {\n        errors.email = \"Please enter a valid email!\";\n      }\n\n      if (isEmpty(formData.password)) {\n        errors.password = \"Password can't be blank!\";\n      }\n\n      if (isEmpty(errors)) {\n        return true;\n      } else {\n        return errors;\n      }\n    };\n\n    _this.login = function (e) {\n      e.preventDefault();\n\n      var errors = _this.validateLoginForm();\n\n      var formData = _this.state.formData;\n\n      if (errors === true) {\n        getUserByUsernameAndPassword(formData.email, formData.password).then(function (data) {\n          console.log(data + \"Data from login\");\n\n          if (data === null) {\n            console.log(\"Failed 404\");\n\n            _this.setState({\n              errorSnackBar: false\n            });\n          } else if (data.studentId != null) {\n            console.log(data + \"I am a student\");\n\n            _this.setState({\n              student: data\n            });\n\n            console.log(_this.state.student.firstName);\n\n            _this.setState({\n              errorSnackBar: true,\n              student: new Student(data.studentId, new Subgroup(0, data.studentGroup, data.studentSubGroup), data.firstName, data.lastName, data.email, data.major, data.university, data.faculty)\n            });\n\n            _this.props.addUser(_this.state.student);\n\n            _this.props.history.push('/user');\n          } else {\n            console.log(data + \"I am a teacher\");\n\n            _this.setState({\n              teacher: data\n            });\n\n            console.log(_this.state.teacher);\n\n            _this.setState({\n              errorSnackBar: false,\n              teacher: new Teacher(data.teacherId, data.teacherDepartment, data.teacherAvailability, data.teacherFirstName, data.teacherLastName, data.email, data.teacherUniversity, data.teacherFaculty, data.teacherWebSite)\n            });\n\n            _this.props.addUser(_this.state.teacher);\n\n            _this.props.history.push('/teacher');\n          }\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      } else {\n        _this.setState({\n          localErrors: errors,\n          formSubmitted: true\n        });\n      }\n\n      console.log(\"errors \" + _this.state.localErrors);\n    };\n\n    _this.state = {\n      formData: {},\n      // Contains login form data\n      localErrors: {},\n      // Contains login field errors\n      formSubmitted: false,\n      // Indicates submit status of login form\n      loading: false,\n      // Indicates in progress state of login form\n      student: null,\n      teacher: null,\n      errorSnackBar: true\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          errors = _this$state.errors,\n          formSubmitted = _this$state.formSubmitted;\n      return React.createElement(MuiThemeProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"HeroSide\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"MainTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"TitleUbbTool\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"UBB\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"UBB\"), React.createElement(\"span\", {\n        className: \"Tool\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Tool\")), React.createElement(\"div\", {\n        className: \"TitlePro\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"PRO\")), React.createElement(\"img\", {\n        className: \"HeroImageLogin\",\n        alt: \"hero\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"MidDivider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"FormSide\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"LoginForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"SignIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Sign in\"), React.createElement(TextField, {\n        className: \"ceva\",\n        variant: \"outlined\",\n        margin: \"normal\",\n        required: true,\n        fullWidth: true,\n        id: \"email\",\n        label: \"Email Address\",\n        autoComplete: \"email\",\n        autoFocus: true,\n        name: \"email\",\n        onChange: this.handleInputChange,\n        error: !(this.state.localErrors.email == null),\n        helperText: this.state.localErrors.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        className: \"PasswordTextField\",\n        variant: \"outlined\",\n        margin: \"normal\",\n        required: true,\n        fullWidth: true,\n        type: \"password\",\n        id: \"password\",\n        label: \"Password\",\n        autoComplete: \"email\",\n        autoFocus: true,\n        onChange: this.handleInputChange,\n        name: \"password\",\n        error: !(this.state.localErrors.password == null),\n        helperText: this.state.localErrors.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"buttonWithErrorOnTheSide\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-secondary myButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Submit\"), React.createElement(Typography, {\n        className: \"snack\",\n        hidden: this.state.errorSnackBar,\n        variant: \"subtitle1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Invalid email or password!\")), React.createElement(\"div\", {\n        style: {\n          float: \"left\",\n          marginTop: \"7%\",\n          marginLeft: \"5%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Already have an account? \", React.createElement(\"a\", {\n        href: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Register\"))))))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default connect()(Login);","map":{"version":3,"sources":["C:/Users/Diana/Facultate/Year3/PC/ubb-protool-fe/src/components/login/Login.js"],"names":["React","isEmail","isEmpty","connect","MuiThemeProvider","TextField","Teacher","getUserByUsernameAndPassword","Student","Subgroup","Typography","Login","props","handleInputChange","event","target","value","name","formData","state","setState","validateLoginForm","e","errors","email","password","login","preventDefault","then","data","console","log","errorSnackBar","studentId","student","firstName","studentGroup","studentSubGroup","lastName","major","university","faculty","addUser","history","push","teacher","teacherId","teacherDepartment","teacherAvailability","teacherFirstName","teacherLastName","teacherUniversity","teacherFaculty","teacherWebSite","catch","err","localErrors","formSubmitted","loading","float","marginTop","marginLeft","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport './Login.css';\r\nimport {isEmail, isEmpty} from '../../shared/validator';\r\nimport {connect} from 'react-redux'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport '@material-ui/core'\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {Teacher} from \"../../model/Teacher\";\r\nimport {getUserByUsernameAndPassword} from \"../../rest/loginRest\";\r\nimport {Student} from \"../../model/Student\";\r\nimport {Subgroup} from \"../../model/Subgroup\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nclass Login extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            formData: {}, // Contains login form data\r\n            localErrors: {}, // Contains login field errors\r\n            formSubmitted: false, // Indicates submit status of login form\r\n            loading: false, // Indicates in progress state of login form\r\n            student: null,\r\n            teacher: null,\r\n            errorSnackBar: true\r\n        }\r\n    }\r\n\r\n    handleInputChange = (event) => {\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        let {formData} = this.state;\r\n        formData[name] = value;\r\n\r\n        this.setState({\r\n            formData: formData\r\n        });\r\n    };\r\n\r\n    validateLoginForm = (e) => {\r\n\r\n        let errors = {};\r\n        const {formData} = this.state;\r\n\r\n        if (isEmpty(formData.email)) {\r\n            errors.email = \"Email can't be blank!\";\r\n        } else if (!isEmail(formData.email)) {\r\n            errors.email = \"Please enter a valid email!\";\r\n        }\r\n\r\n        if (isEmpty(formData.password)) {\r\n            errors.password = \"Password can't be blank!\";\r\n        }\r\n\r\n        if (isEmpty(errors)) {\r\n            return true;\r\n        } else {\r\n            return errors;\r\n        }\r\n    };\r\n\r\n    login = (e) => {\r\n\r\n        e.preventDefault();\r\n\r\n        let errors = this.validateLoginForm();\r\n        const {formData} = this.state;\r\n\r\n        if (errors === true) {\r\n            getUserByUsernameAndPassword(formData.email, formData.password).then((data) => {\r\n                console.log(data + \"Data from login\");\r\n                if (data === null) {\r\n                    console.log(\"Failed 404\");\r\n                    this.setState({\r\n                        errorSnackBar: false\r\n                    })\r\n                } else if (data.studentId != null) {\r\n                    console.log(data + \"I am a student\");\r\n                    this.setState({student: data});\r\n                    console.log(this.state.student.firstName);\r\n                    this.setState({\r\n                        errorSnackBar: true,\r\n                        student: new Student(data.studentId,\r\n                            new Subgroup(0, data.studentGroup, data.studentSubGroup),\r\n                            data.firstName, data.lastName, data.email, data.major, data.university, data.faculty)\r\n                    });\r\n                    this.props.addUser(this.state.student);\r\n                    this.props.history.push('/user');\r\n                } else {\r\n                    console.log(data + \"I am a teacher\");\r\n                    this.setState({teacher: data});\r\n                    console.log(this.state.teacher);\r\n                    this.setState({\r\n                        errorSnackBar: false,\r\n                        teacher: new Teacher(data.teacherId, data.teacherDepartment,\r\n                            data.teacherAvailability, data.teacherFirstName,\r\n                            data.teacherLastName, data.email, data.teacherUniversity,\r\n                            data.teacherFaculty, data.teacherWebSite)\r\n                    });\r\n                    this.props.addUser(this.state.teacher);\r\n                    this.props.history.push('/teacher');\r\n                }\r\n            }).catch((err) => console.log(err));\r\n        } else {\r\n            this.setState({\r\n                localErrors: errors,\r\n                formSubmitted: true\r\n            });\r\n        }\r\n\r\n        console.log(\"errors \" + this.state.localErrors);\r\n    };\r\n\r\n    render() {\r\n\r\n        const {errors, formSubmitted} = this.state;\r\n\r\n        return (\r\n            <MuiThemeProvider>\r\n                <div className=\"Login\">\r\n\r\n                    <div className=\"HeroSide\">\r\n                        <div className=\"MainTitle\">\r\n                            <div className=\"TitleUbbTool\">\r\n                                <span className=\"UBB\">UBB</span>\r\n                                <span className=\"Tool\">Tool</span>\r\n                            </div>\r\n                            <div className=\"TitlePro\">\r\n                                PRO\r\n                            </div>\r\n                        </div>\r\n\r\n                        <img className=\"HeroImageLogin\"\r\n                             alt=\"hero\"/>\r\n                        <div className=\"MidDivider\">\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"FormSide\">\r\n                        <div className=\"LoginForm\">\r\n                            <form onSubmit={this.login}>\r\n                                <div className=\"SignIn\">Sign in</div>\r\n                                <TextField\r\n                                    className=\"ceva\"\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"email\"\r\n                                    label=\"Email Address\"\r\n                                    autoComplete=\"email\"\r\n                                    autoFocus\r\n                                    name=\"email\"\r\n                                    onChange={this.handleInputChange}\r\n                                    error={!(this.state.localErrors.email == null)}\r\n                                    helperText={this.state.localErrors.email}\r\n                                />\r\n                                <TextField\r\n                                    className=\"PasswordTextField\"\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required\r\n                                    fullWidth\r\n                                    type=\"password\"\r\n                                    id=\"password\"\r\n                                    label=\"Password\"\r\n                                    autoComplete=\"email\"\r\n                                    autoFocus\r\n                                    onChange={this.handleInputChange}\r\n                                    name=\"password\"\r\n                                    error={!(this.state.localErrors.password == null)}\r\n                                    helperText={this.state.localErrors.password}\r\n                                />\r\n                                <div >\r\n                                    <div className=\"buttonWithErrorOnTheSide\">\r\n                                        <button type=\"submit\" className=\"btn btn-secondary myButton\">Submit</button>\r\n                                        <Typography className=\"snack\" hidden={this.state.errorSnackBar} variant={\"subtitle1\"}>\r\n                                            Invalid email or password!\r\n                                        </Typography>\r\n                                    </div>\r\n                                    <div style={{float: \"left\", marginTop: \"7%\", marginLeft: \"5%\"}}>Already have an\r\n                                        account? <a href=\"/register\">Register</a></div>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect()(Login);\r\n"]},"metadata":{},"sourceType":"module"}